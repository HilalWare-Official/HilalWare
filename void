-- üst düzey void
local Players = game:GetService("Players")
local player = Players.LocalPlayer
local UserInputService = game:GetService("UserInputService")
local savedPosition = nil
local isEnabled = false
local loop = nil

-- Önce GUI varsa sil
pcall(function()
    player:WaitForChild("PlayerGui"):FindFirstChild("AntiVoidGUI"):Destroy()
end)

-- RootPart fonksiyonu
local function getRootPart()
    local char = player.Character or player.CharacterAdded:Wait()
    return char:WaitForChild("HumanoidRootPart")
end

-- Platform oluştur
local function createPlatform(pos)
    local platform = Instance.new("Part")
    platform.Size = Vector3.new(30, 1, 30)
    platform.Position = pos - Vector3.new(0, 2.5, 0)
    platform.Anchored = true
    platform.CanCollide = true
    platform.BrickColor = BrickColor.new("Bright green")
    platform.Transparency = 0.1
    platform.Name = "AntiVoidPlatform"
    platform.Parent = workspace
end

-- Eski platformları temizle
local function clearOldPlatform()
    for _, part in pairs(workspace:GetChildren()) do
        if part:IsA("Part") and part.Name == "AntiVoidPlatform" then
            part:Destroy()
        end
    end
end

-- Oturakları yok et
local function destroySeats()
    for _, v in pairs(workspace:GetDescendants()) do
        if v:IsA("Seat") or v:IsA("VehicleSeat") then
            pcall(function()
                v:Destroy()
            end)
        end
    end
end

-- Yeni ölüme sınırı (isteğine göre değiştir, mesela -500 yapalım)
workspace.FallenPartsDestroyHeight = -50000000000000000000000

-- GUI oluştur
local gui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
gui.Name = "AntiVoidGUI"
gui.ResetOnSpawn = false

local frame = Instance.new("Frame", gui)
frame.Size = UDim2.new(0, 180, 0, 80)
frame.Position = UDim2.new(0, 50, 0, 200)
frame.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
frame.Active = true
frame.Draggable = true

-- Yuvarlak köşe
local corner = Instance.new("UICorner", frame)
corner.CornerRadius = UDim.new(0, 12)

-- Buton
local button = Instance.new("TextButton", frame)
button.Size = UDim2.new(1, -20, 0, 40)
button.Position = UDim2.new(0, 10, 0, 20)
button.Text = "AntiVoid Aç"
button.Font = Enum.Font.GothamBold
button.TextSize = 18
button.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
button.TextColor3 = Color3.fromRGB(255, 255, 255)

local buttonCorner = Instance.new("UICorner", button)
buttonCorner.CornerRadius = UDim.new(0, 8)

-- Buton olayları
button.MouseButton1Click:Connect(function()
    isEnabled = not isEnabled

    if isEnabled then
        button.Text = "AntiVoid Kapat"
        savedPosition = getRootPart().Position

        loop = task.spawn(function()
            while isEnabled do
                task.wait(0.0001)
                pcall(function()
                    local root = getRootPart()
                    local voidY = workspace.FallenPartsDestroyHeight
                    local pos = Vector3.new(999, voidY + 2, 999)

                    root.CFrame = CFrame.new(pos)
                    clearOldPlatform()
                    createPlatform(pos)
                    destroySeats()
                end)
            end
        end)
    else
        button.Text = "AntiVoid Aç"
        if loop then
            task.cancel(loop)
        end

        -- Pozisyona geri dön
        if savedPosition then
            local root = getRootPart()
            root.CFrame = CFrame.new(savedPosition)
        end
    end
end)
